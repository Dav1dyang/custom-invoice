<!DOCTYPE html>
<html lang="en" data-theme="system">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>David's Invoice</title>
    <script src="https://unpkg.com/jspdf@2.4.0/dist/jspdf.umd.min.js"></script>
    <!-- Google Fonts for reliable PDF font rendering -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@700&family=DM+Mono:wght@300&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="main">
      <div class="app-container">
        <div class="content-section">
          <!-- LEFT SIDE -->
          <div class="content-left">
            <!-- HEADER -->
            <div class="header card">
              <div class="header-content">
                <div class="header-text">
                  <h1>Invoice Generator</h1>
                  <div class="subtitle">
                    Professional invoice creation with customizable styling
                  </div>
                </div>
                <button
                  class="theme-toggle"
                  onclick="toggleTheme()"
                  title="Toggle light/dark theme"
                >
                  <span class="theme-icon">‚òÄÔ∏è</span>
                </button>
              </div>
            </div>

            <!-- TEMPLATES -->
            <div class="templates card">
              <h3>Templates</h3>

              <!-- Quick Access Row -->
              <div class="template-quick-row">
                <div class="template-chips">
                  <button
                    class="filter-chip"
                    data-template="default-client"
                    style="display: none"
                  >
                    Default Client
                  </button>
                  <button
                    class="filter-chip"
                    data-template="tech-company"
                    style="display: none"
                  >
                    Tech Company
                  </button>
                  <button
                    class="filter-chip recent-chip"
                    data-template="sample-client"
                    style="display: none"
                  >
                    Sample Client
                  </button>
                  <button
                    class="filter-chip"
                    data-template="default"
                    style="display: block"
                  >
                    Default
                  </button>
                </div>
                <button class="load-btn" onclick="loadQuickTemplate()">
                  Load
                </button>
              </div>

              <!-- Management Section -->
              <div class="template-manage-section">
                <div class="template-input-row">
                  <div class="template-input-group">
                    <input
                      id="templateInput"
                      type="text"
                      placeholder="Template name..."
                      list="templateSuggestions"
                    />
                    <datalist id="templateSuggestions">
                      <!-- Dynamic options will be populated here -->
                    </datalist>
                  </div>
                  <div class="template-actions-row">
                    <button
                      class="action-icon save-icon"
                      id="saveAction"
                      title="Save Template"
                      onclick="handleSaveAction()"
                    >
                      <span>üíæ</span>
                    </button>
                    <button
                      class="action-icon star-icon"
                      id="starAction"
                      title="Star Template"
                      onclick="handleStarAction()"
                    >
                      <span>‚≠ê</span>
                    </button>
                    <button
                      class="action-icon delete-icon"
                      id="deleteAction"
                      title="Delete Template"
                      onclick="handleDeleteAction()"
                    >
                      <span>üóëÔ∏è</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- INVOICE CONTENT -->
            <div class="section card">
              <h3>From</h3>
              <div class="row2">
                <div class="label">NAME/COMPANY:</div>
                <input id="fromName" type="text" value="" />
              </div>
              <div class="row2">
                <div class="label">WEBSITE:</div>
                <input id="fromWebsite" type="text" value="" />
              </div>
              <div class="row2">
                <div class="label">TELEPHONE:</div>
                <input id="fromPhone" type="text" value="" />
              </div>
              <div class="row2">
                <div class="label">ADDRESS:</div>
                <input id="fromAddress" type="text" value="" />
              </div>
            </div>

            <div class="section card">
              <h3>Bill To</h3>
              <div class="row2">
                <div class="label">COMPANY:</div>
                <input id="toCompany" type="text" value="" />
              </div>
              <div class="row2">
                <div class="label">ATTENTION:</div>
                <input id="toNames" type="text" value="" />
              </div>
              <div class="row2">
                <div class="label">ADDRESS:</div>
                <input id="toAddress" type="text" value="" />
              </div>
              <div class="row2">
                <div class="label">CONTACT:</div>
                <textarea id="toContact"></textarea>
              </div>
            </div>

            <div class="section card">
              <h3>Invoice Details</h3>
              <div class="row2">
                <div class="label">INVOICE NO:</div>
                <div class="invoice-number-group">
                  <span class="invoice-prefix">IN-</span>
                  <input id="companyAbbrev" type="text" placeholder="CACTW" maxlength="10" />
                  <span class="invoice-separator">-</span>
                  <input id="invoiceSequence" type="text" placeholder="01" maxlength="6" />
                </div>
              </div>
              <div class="row2">
                <div class="label">DATE ISSUED:</div>
                <input id="invoiceDate" type="date" value="2025-07-11" />
              </div>
              <div class="row2">
                <div class="label">DUE DATE:</div>
                <input id="dueDate" type="date" value="2025-08-11" />
              </div>
              <div class="row2">
                <div class="label">CURRENCY:</div>
                <input id="currency" type="text" value="USD" />
              </div>
            </div>

            <div class="section card">
              <h3>Payment Instructions</h3>
              <div class="row2">
                <div class="label">INSTRUCTIONS:</div>
                <textarea id="paymentInstructions"></textarea>
              </div>
            </div>

            <!-- PDF SETTINGS -->
            <div class="settings card">
              <details class="pdf-settings">
                <summary>PDF Settings</summary>
                <div class="pdf-content">
                  <div class="settings-grid">
                    <!-- PDF Page Settings -->
                    <div class="settings-group">
                      <h4>Page Setup</h4>
                      <div class="setting-row">
                        <label>Paper Size</label>
                        <select id="paperSize">
                          <option value="letter" selected>
                            Letter (8.5√ó11")
                          </option>
                          <option value="a4">A4 (210√ó297 mm)</option>
                        </select>
                      </div>
                      <div class="setting-row">
                        <label>Orientation</label>
                        <select id="orientation">
                          <option value="portrait" selected>Portrait</option>
                          <option value="landscape">Landscape</option>
                        </select>
                      </div>
                      <div class="setting-row">
                        <label>Logo Upload</label>
                        <div class="logo-box">
                          <label class="logo-btn" for="logoUpload"
                            >Select Logo</label
                          >
                          <input id="logoUpload" type="file" accept="image/*" />
                          <img id="logoPreview" alt="Logo preview" />
                        </div>
                      </div>
                    </div>

                    <!-- PDF Style Settings -->
                    <div class="settings-group">
                      <h4>Style & Color</h4>
                      <div class="setting-row">
                        <label>Style Mode</label>
                        <select id="styleMode">
                          <option value="outline">
                            Clean Outline (Technical Drawing)
                          </option>
                          <option value="filled">
                            Filled Background (Datasheet)
                          </option>
                          <option value="ascii">
                            ASCII Art Style (Retro Terminal)
                          </option>
                        </select>
                      </div>
                      <div class="setting-row">
                        <label>Accent Color</label>
                        <div class="color-control">
                          <input
                            type="color"
                            id="accentColor"
                            value="#CEFF00"
                          />
                          <input
                            type="text"
                            id="hexInput"
                            placeholder="#CEFF00"
                            maxlength="7"
                          />
                          <span
                            class="swatch"
                            id="swAccent"
                            style="background: #ceff00"
                          ></span>
                        </div>
                      </div>
                      <div class="setting-row">
                        <label>Quick Presets</label>
                        <div class="preset-grid">
                          <button
                            type="button"
                            class="preset-btn"
                            data-preset="technical"
                            style="background: #111111; color: #fff"
                          >
                            Technical Black
                          </button>
                          <button
                            type="button"
                            class="preset-btn"
                            data-preset="blueprint"
                            style="background: #0b4c8c; color: #fff"
                          >
                            Blueprint Blue
                          </button>
                          <button
                            type="button"
                            class="preset-btn"
                            data-preset="red"
                            style="background: #dc2626; color: #fff"
                          >
                            Alert Red
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </details>
            </div>
          </div>

          <!-- RIGHT SIDE: Line Items & Preview -->
          <div class="content-right">
            <!-- ITEMS -->
            <div class="items card">
              <h3>Line Items</h3>

              <!-- Import Controls -->
              <details class="import-section">
                <summary>Import line items from CSV</summary>
                <div class="import-content">
                  <div class="settings-grid">
                    <!-- Data Input Section -->
                    <div class="settings-group">
                      <h4>Data Input</h4>
                      <div class="setting-row">
                        <label>Upload CSV File</label>
                        <input
                          id="csvFileInput"
                          type="file"
                          accept=".csv,.tsv,.txt"
                        />
                      </div>
                      <div class="setting-row">
                        <label>Or Paste CSV Data</label>
                        <textarea
                          id="csvPasteArea"
                          placeholder="Paste CSV data here (Description, Quantity, Rate format)"
                          rows="3"
                        ></textarea>
                      </div>
                    </div>

                    <!-- Actions Section -->
                    <div class="settings-group">
                      <h4>Actions</h4>
                      <div class="setting-row">
                        <label>Import Data</label>
                        <div class="import-actions">
                          <button type="button" onclick="importFromFile()">
                            Import File
                          </button>
                          <button type="button" onclick="importFromPaste()">
                            Import Pasted Data
                          </button>
                        </div>
                      </div>
                      <div class="setting-row">
                        <label>Manage Items</label>
                        <button
                          type="button"
                          class="clear-btn"
                          onclick="clearAllItems()"
                        >
                          Clear All Items
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </details>

              <table id="itemsTable">
                <colgroup>
                  <col style="width: 40%" />
                  <col style="width: 15%" />
                  <col style="width: 15%" />
                  <col style="width: 20%" />
                  <col style="width: 10%" />
                </colgroup>
                <thead>
                  <tr>
                    <th>DESCRIPTION</th>
                    <th>QTY/HRS</th>
                    <th>RATE</th>
                    <th>AMOUNT</th>
                    <th>ACTION</th>
                  </tr>
                </thead>
                <tbody id="itemsBody"></tbody>
              </table>
              <button class="add" onclick="addItem()">+ ADD LINE ITEM</button>
            </div>

            <!-- PREVIEW & DOWNLOAD ACTIONS -->
            <div class="preview-actions card">
              <button class="go" onclick="renderPreview()">
                Preview Invoice
              </button>
              <button class="dl-btn" onclick="downloadPDF()">
                <span class="download-icon">‚¨á</span>
                Download PDF
              </button>
            </div>

            <!-- PREVIEW -->
            <div class="preview" id="preview">
              <div class="out card" id="invoiceContent"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
